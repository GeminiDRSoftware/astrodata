<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Descriptors &mdash; astrodata 0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/../manuals/_static/color_styles.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/logo_variables.css?v=947f2b5d" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=7026087e"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reference API" href="../full_api.html" />
    <link rel="prev" title="Tags" href="tags.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            astrodata
              <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Astrodata Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cheatsheet.html">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermanual/index.html">User Manual</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Programmer’s Manual</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html">General Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="adclass.html">AstroData and Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="containers.html">Data Containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="tags.html">Tags</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Descriptors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../full_api.html">Reference API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix_descriptors.html">List of Gemini Standard Descriptors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_short.html">Common API for Users</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">astrodata</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Astrodata Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html">Programmer’s Manual</a></li>
      <li class="breadcrumb-item active">Descriptors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manuals/progmanual/descriptors.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="descriptors">
<span id="ad-descriptors"></span><h1>Descriptors<a class="headerlink" href="#descriptors" title="Link to this heading"></a></h1>
<p>Descriptors are regular methods that translate metadata from the raw
data (e.g., cards from FITS headers) to values useful for the user,
potentially doing some processing in between. They exist to:</p>
<ul class="simple">
<li><p>Abstract the actual organization of the metadata, with arbitrarily complex
processing to generate a useful value. These abstractions can be modified
to be instrument-specific.</p></li>
<li><p>Provide a common interface to a set of instruments. This simplifies user
training (no need to learn a different API for each instrument), and
facilitates the reuse of code for pipelines and data processing.</p></li>
<li><p>They can be used to directly translate character-limited FITS header keywords
into more descriptive names of arbitrary length.</p></li>
</ul>
<p>Descriptors <strong>should</strong> be decorated using <cite>~astrodata.astro_data_descriptor</cite>.
The only function of this decorator is to ensure that the descriptor is marked
as such: it does not alter its input or output in any way. This lets the user
explore the API of an <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object via the
<cite>~astrodata.AstroData.descriptors</cite> property. Here’s an example of how we could
use a descriptor to build a simple class on top of the <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> base class:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above example is oversimplified, and would only work with a fits file
containing these keywords. In practice, an <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> extension like this
would be specific to an instrument/file format that would be resolved using
tags.</p>
</div>
<p>Descriptors <strong>can</strong> be decorated with <code class="xref py py-func docutils literal notranslate"><span class="pre">returns_list()</span></code> to
eliminate the need to code some logic. Some descriptors return single values,
while some return lists, one per extension. Typically, the former
descriptors refer calues associated with an entire observation (and, for MEF
files, are usually extracted from metadata in the PHU, such as <code class="docutils literal notranslate"><span class="pre">airmass</span></code>),
while the latter descriptors where different extensions might return
different values (and typically come from metadata in the individual HDUs, such
as <code class="docutils literal notranslate"><span class="pre">gain</span></code>).  A list is returned even if there is only one extension in the
<a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object, as this allows code to be written generically to iterate
over the <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object and the descriptor return, without needing to know
how many extensions there are.</p>
<p>The <cite>~astrodata.core.returns_list</cite> decorator ensures that the descriptor
returns an appropriate object (value or list), using the following rules
to avoid unexpected behavior/confusing errors:</p>
<ul class="simple">
<li><p>If the <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object is not a single slice:</p>
<ul>
<li><p>If the undecorated descriptor returns a list, an exception is raised
if the list is not the same length as the number of extensions.</p></li>
<li><p>If the undecorated descriptor returns a single value, the decorator
will turn it into a list of the correct length by copying this value.</p></li>
</ul>
</li>
<li><p>If the <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object is a single slice and the undecorated
descriptor returns a list, only the first element is returned.</p></li>
</ul>
<p>An example of the use of this decorator is the NIRI
<cite>~gemini_instruments.niri.AstroDataNiri.gain</cite> descriptor, which reads the
value from a lookup table and simply returns it.  A single value is only
appropriate if the <a class="reference internal" href="../../api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object is singly-sliced and the decorator ensures
that a list is returned otherwise.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tags.html" class="btn btn-neutral float-left" title="Tags" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../full_api.html" class="btn btn-neutral float-right" title="Reference API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-present, NOIRLab/Gemini Observatories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>