<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; astrodata 0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="_static/../manuals/_static/color_styles.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/logo_variables.css?v=947f2b5d" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=7026087e"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Astrodata Manual" href="manuals/index.html" />
    <link rel="prev" title="astrodata Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            astrodata
              <img src="_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-files">Example Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#opening-files">Opening Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#digesting-metadata">Digesting metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#viewing-metadata">Viewing metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-data">Accessing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-usage">Advanced Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manuals/index.html">Astrodata Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/index.html">Developer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_short.html">Common API for Users</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">astrodata</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading"></a></h1>
<p>This guide is meant to familiarize you with the most important
concepts of <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, specifically as someone using <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> to
work with your own data.</p>
<p>If you are a user getting started with <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, you will likely
want to start with the <a class="reference internal" href="manuals/usermanual/index.html"><span class="doc">User Guide</span></a>. If you want a more detailed overview
of the library, you can start with the <a class="reference internal" href="manuals/progmanual/index.html"><span class="doc">Developer Guide</span></a>, which covers the
majority of topics discussed here in more detail.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>The easiest way to install <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> is to use <cite>pip</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>astrodata
</pre></div>
</div>
<p>This will install the latest stable release of <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, as well as
all of its standard dependencies (i.e., not the development dependencies:
see <a class="reference internal" href="#advanced-usage">Advanced Usage</a>).</p>
</section>
<section id="example-files">
<h2>Example Files<a class="headerlink" href="#example-files" title="Link to this heading"></a></h2>
<p>As <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> is part of the <a class="reference external" href="https://dragons.readthedocs.io/">DRAGONS</a> software system, there are some
helper functions to download example data for testing purposes. You can
download files using <code class="xref py py-func docutils literal notranslate"><span class="pre">download_from_archive()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">astrodata.testing</span><span class="w"> </span><span class="kn">import</span> <span class="n">download_from_archive</span>

<span class="c1"># Files we&#39;ll use in this example.</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;N20170614S0201&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170614S0202&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170614S0203&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170614S0204&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170614S0205&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170613S0180&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170613S0181&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170613S0182&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170613S0183&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170613S0184&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170615S0534&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170615S0535&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170615S0536&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170615S0537&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170615S0538&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170702S0178&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170702S0179&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170702S0180&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170702S0181&#39;</span><span class="p">,</span>
    <span class="s1">&#39;N20170702S0182&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bpm_20170306_gmos-n_Ham_22_full_12amp&#39;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="o">+</span> <span class="s1">&#39;.fits&#39;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>

<span class="c1"># Download the files. We&#39;ll be placing these in a directory called &#39;data&#39;.</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">download_from_archive</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;quickstart_data&#39;</span><span class="p">,</span> <span class="n">sub_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>These files are from the <a class="reference external" href="https://dragons.readthedocs.io/">DRAGONS</a> GMOS tutorial, but we’ll pretend we don’t
have that and want to work with them using <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> alone. They will be
stored in the <code class="docutils literal notranslate"><span class="pre">./quickstart_data/</span></code> directory relative to your current working directory.</p>
</section>
<section id="opening-files">
<h2>Opening Files<a class="headerlink" href="#opening-files" title="Link to this heading"></a></h2>
<p>The primary way to interact with <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> is through the
<a class="reference internal" href="api/astrodata.from_file.html#astrodata.from_file" title="astrodata.from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_file()</span></code></a> function. This function will open a file and
create an <a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object from it. You can then use this object to access
the data and metadata in the file.</p>
<p>Let’s just open one of the files without any other setup and see what happens:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">astrodata</span>

<span class="n">ad</span> <span class="o">=</span> <span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;quickstart_data/N20170614S0201.fits&#39;</span><span class="p">)</span>

<span class="n">ad</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<p>This will print out a summary of the contents of the file. In this case,
it will look something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Filename: quickstart_data/N20170614S0201.fits
Tags:

Pixels Extensions
Index  Content                  Type              Dimensions     Format
[ 0]   science                  NDAstroData       (2112, 288)    uint16
[ 1]   science                  NDAstroData       (2112, 288)    uint16
[ 2]   science                  NDAstroData       (2112, 288)    uint16
[ 3]   science                  NDAstroData       (2112, 288)    uint16
[ 4]   science                  NDAstroData       (2112, 288)    uint16
[ 5]   science                  NDAstroData       (2112, 288)    uint16
[ 6]   science                  NDAstroData       (2112, 288)    uint16
[ 7]   science                  NDAstroData       (2112, 288)    uint16
[ 8]   science                  NDAstroData       (2112, 288)    uint16
[ 9]   science                  NDAstroData       (2112, 288)    uint16
[10]   science                  NDAstroData       (2112, 288)    uint16
[11]   science                  NDAstroData       (2112, 288)    uint16
</pre></div>
</div>
</section>
<section id="digesting-metadata">
<h2>Digesting metadata<a class="headerlink" href="#digesting-metadata" title="Link to this heading"></a></h2>
<section id="viewing-metadata">
<h3>Viewing metadata<a class="headerlink" href="#viewing-metadata" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> library is designed to work with astronomical data, and as such
it has a number of features that are specific to this kind of data. One of the
most important features is digesting and storing FITS-style metadata.</p>
<p>When you open a file with <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, it will read the metadata from the file
and try to determine the best <a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> subclass to use. This is registered
in the <code class="xref py py-class docutils literal notranslate"><span class="pre">AstroDataFactory</span></code> class. Any class you create that inherits from
<a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> can be registered with the factory, and <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> will use it
when opening files.</p>
<p>Let’s see what the metadata for these files looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Iterate over the FITS PHU and print the metadata.</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PHU Metadata for </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">ad</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)):</span>
        <span class="k">continue</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>which will print out the following (truncated for brevity):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PHU Metadata for N20170614S0201.fits:
SIMPLE: True
BITPIX: 16
NAXIS: 0
EXTEND: True
COMMENT:   FITS (Flexible Image Transport System) format is defined in &#39;Astronomy
COMMENT:   and Astrophysics&#39;, volume 376, page 359; bibcode: 2001A&amp;A...376..359H
INSTRUME: GMOS-N
OBJECT: starfield
OBSTYPE: OBJECT
OBSCLASS: science
&lt;...more header matter...&gt;
OBSERVER: A. Smith
OBSERVAT: Gemini-North
TELESCOP: Gemini-North
PARALLAX: 0.0
RADVEL: 0.0
EPOCH: 2000.0
EQUINOX: 2000.0
TRKEQUIN: 2000.0
SSA: J. Miller
RA: 285.00429583
DEC: 24.98093611
ELEVATIO: 84.5317708333333
AZIMUTH: -17.5980347222222
CRPA: 198.346843843749
HA: +00:07:15.50
LT: 01:57:59.2
</pre></div>
</div>
<p>There’s quite a bit of metadata here! Let’s make a class that gets the most
important parts to us right now to make it easier to work with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">astrodata</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstroData</span><span class="p">,</span> <span class="n">factory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astrodata</span><span class="w"> </span><span class="kn">import</span> <span class="n">astro_data_tag</span><span class="p">,</span> <span class="n">TagSet</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GMOSAstroData</span><span class="p">(</span><span class="n">AstroData</span><span class="p">):</span>

    <span class="c1"># _matches_data is a class attribute that tells the factory to use this</span>
    <span class="c1"># class for files that match the given tags.</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_matches_data</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="c1"># Your definitions here must return a boolean, with True</span>
        <span class="c1"># indicating that the class is appropriate for the file.</span>
        <span class="n">observatory</span> <span class="o">=</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;TELESCOP&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">observatory</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;GEMINI-NORTH&#39;</span><span class="p">,</span> <span class="s1">&#39;GEMINI-SOUTH&#39;</span><span class="p">}</span>


<span class="k">class</span><span class="w"> </span><span class="nc">GMOSScienceAstroData</span><span class="p">(</span><span class="n">GMOSAstroData</span><span class="p">):</span>

    <span class="c1"># _matches_data is a class attribute that tells the factory to use this</span>
    <span class="c1"># class for files that match the given tags.</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_matches_data</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="n">obs</span> <span class="o">=</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;OBSTYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">obstype</span> <span class="o">=</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;OBSCLASS&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">obs</span> <span class="o">==</span> <span class="s1">&#39;OBJECT&#39;</span> <span class="ow">and</span> <span class="n">obstype</span> <span class="o">==</span> <span class="s1">&#39;SCIENCE&#39;</span>

<span class="c1"># Register the classes with the factory.</span>
<span class="n">factory</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="n">GMOSAstroData</span><span class="p">)</span>
<span class="n">factory</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="n">GMOSScienceAstroData</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, when we open a file, <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> will use the appropriate subclass
based on the metadata in the file. Let’s see what happens when we open
all the files we downloaded:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quickstart_data/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2"> with class </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Opened N20170614S0201.fits with class &lt;class &#39;__main__.GMOSScienceAstroData&#39;&gt;
Opened N20170614S0202.fits with class &lt;class &#39;__main__.GMOSScienceAstroData&#39;&gt;
Opened N20170614S0203.fits with class &lt;class &#39;__main__.GMOSScienceAstroData&#39;&gt;
Opened N20170614S0204.fits with class &lt;class &#39;__main__.GMOSScienceAstroData&#39;&gt;
Opened N20170614S0205.fits with class &lt;class &#39;__main__.GMOSScienceAstroData&#39;&gt;
Opened N20170613S0180.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170613S0181.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170613S0182.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170613S0183.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170613S0184.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170615S0534.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170615S0535.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170615S0536.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170615S0537.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170615S0538.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170702S0178.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170702S0179.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170702S0180.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170702S0181.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened N20170702S0182.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
Opened bpm_20170306_gmos-n_Ham_22_full_12amp.fits with class &lt;class &#39;__main__.GMOSAstroData&#39;&gt;
</pre></div>
</div>
<p>The default factory (<code class="docutils literal notranslate"><span class="pre">factory</span></code>, above, where we registered our classes) was
able to determine which files were science files and which were not, and
used the appropriate class to open them.</p>
</section>
</section>
<section id="accessing-data">
<h2>Accessing Data<a class="headerlink" href="#accessing-data" title="Link to this heading"></a></h2>
<p>Now that we have the data open, we can access the data and metadata in the
file. The data is stored in the <code class="docutils literal notranslate"><span class="pre">.data</span></code> attribute of the <a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object,
and the metadata is stored in the <code class="docutils literal notranslate"><span class="pre">.phu</span></code> attribute.</p>
<p>Let’s see what the data looks like for one of the files:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the first science extension.</span>
<span class="k">for</span> <span class="n">ad</span> <span class="ow">in</span> <span class="p">(</span><span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quickstart_data/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ad</span><span class="p">,</span> <span class="n">GMOSScienceAstroData</span><span class="p">):</span>
        <span class="k">break</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ad</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[  0   0   0 ...   0   0   0]
 [  0   0   0 ...   0   0   0]
 [  0   0   0 ...   0   0   0]
 ...
 [361 357 358 ... 366 364 370]
 [367 366 365 ... 359 364 361]
 [375 375 375 ... 351 347 353]]
ad.data[0].shape=(2112, 288)
</pre></div>
</div>
<p>This is fine, but what if we’re interested in a particular quantity for our
work? It’s not much more useful than a FITS file at this point, other than the fancy
class we’ve created. Let’s add a method to our class that will fetch us the
airmass for the data.</p>
<p>First, we need to remove the <code class="docutils literal notranslate"><span class="pre">GMOSScienceAstroData</span></code> class we created from the
factory to avoid conflicts with the new class we’re planning:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">factory</span><span class="o">.</span><span class="n">remove_class</span><span class="p">(</span><span class="n">GMOSScienceAstroData</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, let’s add a method to a new class, <code class="docutils literal notranslate"><span class="pre">GMOSSpectrumScienceAstroData</span></code> class that will fetch the
airmass for the data. We’ll subclass <code class="docutils literal notranslate"><span class="pre">GMOSScienceAstroData</span></code> to
reuse what we’ve written above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">astrodata</span><span class="w"> </span><span class="kn">import</span> <span class="n">astro_data_descriptor</span>

<span class="c1"># Note: This is bad practice! But we&#39;re working on an example.</span>
<span class="c1">#       Normally, you will just add this to the old class!</span>
<span class="c1">#       We&#39;re only doing this to show how to add a descriptor.</span>
<span class="c1">#       You should *never* inherit from a class in a way that</span>
<span class="c1">#       overwrites the original class.</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GMOSScienceAstroData</span><span class="p">(</span><span class="n">GMOSScienceAstroData</span><span class="p">):</span>

    <span class="nd">@astro_data_descriptor</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">airmass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Get the airmass from the header.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;AIRMASS&#39;</span><span class="p">)</span>

<span class="c1"># Register the new class with the factory.</span>
<span class="n">factory</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="n">GMOSScienceAstroData</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, when we open a file, we can access the airmass like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quickstart_data/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ad</span><span class="p">,</span> <span class="n">GMOSScienceAstroData</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2"> with class </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Airmass: </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">airmass</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a pretty trivial use case, but one can imagine it being used to
simplify the process of accessing data in a more complex way. These
descriptors can be acessed from subclasses, for example, and you can
get all descriptors from a class using the <code class="docutils literal notranslate"><span class="pre">.descriptors</span></code> attribute.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;quickstart_data/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2"> descriptors:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; + &#39;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ad</span><span class="o">.</span><span class="n">descriptors</span><span class="p">))</span>
</pre></div>
</div>
<p>You’ll see that our <code class="docutils literal notranslate"><span class="pre">airmass</span></code> descriptor is available for the
<code class="docutils literal notranslate"><span class="pre">GMOSScienceAstroData</span></code> class, but not for the <code class="docutils literal notranslate"><span class="pre">GMOSAstroData</span></code> class.</p>
</section>
<section id="tags">
<h2>Tags<a class="headerlink" href="#tags" title="Link to this heading"></a></h2>
<p>Tags are a way to categorize data in <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>. They are meant to be
used to identify the type of data in a file, and can be used to filter
data when opening files.</p>
<p>Tags are stored in the <code class="docutils literal notranslate"><span class="pre">.tags</span></code> attribute of an <a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> object. You
can add tags to a class by using the <code class="docutils literal notranslate"><span class="pre">&#64;astro_data_tag</span></code> decorator on methods
that output tags. For example, we want to tag our <code class="docutils literal notranslate"><span class="pre">GMOSScienceAstroData</span></code>
class as <code class="docutils literal notranslate"><span class="pre">'GMOS'</span></code> and <code class="docutils literal notranslate"><span class="pre">'SCIENCE'</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s remove the GMOSScienceAstroData class from the factory to avoid conflicts.</span>
<span class="n">factory</span><span class="o">.</span><span class="n">remove_class</span><span class="p">(</span><span class="n">GMOSScienceAstroData</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">astrodata</span><span class="w"> </span><span class="kn">import</span> <span class="n">astro_data_tag</span><span class="p">,</span> <span class="n">TagSet</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GMOSAstroDataTagged</span><span class="p">(</span><span class="n">GMOSAstroData</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class for GMOS science data with tags.</span>

<span class="sd">    Note: This still has all the methods from GMOSScienceAstroData! It is a</span>
<span class="sd">    subset of the tags used for the GMOS instrument |AstroData| class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_instrument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># tags = [&#39;GMOS&#39;, self.instrument().upper().replace(&#39;-&#39;, &#39;_&#39;)]</span>
        <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s2">&quot;GMOS&quot;</span><span class="p">])</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_dark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBSTYPE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;DARK&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s2">&quot;DARK&quot;</span><span class="p">,</span> <span class="s2">&quot;CAL&quot;</span><span class="p">],</span> <span class="n">blocks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;IMAGE&quot;</span><span class="p">,</span> <span class="s2">&quot;SPECT&quot;</span><span class="p">])</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_arc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBSTYPE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ARC&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s2">&quot;ARC&quot;</span><span class="p">,</span> <span class="s2">&quot;CAL&quot;</span><span class="p">])</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tag_is_bias</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s2">&quot;BIAS&quot;</span><span class="p">,</span> <span class="s2">&quot;CAL&quot;</span><span class="p">],</span> <span class="n">blocks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;IMAGE&quot;</span><span class="p">,</span> <span class="s2">&quot;SPECT&quot;</span><span class="p">])</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_flat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBSTYPE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FLAT&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;GRATING&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;MIRROR&quot;</span><span class="p">:</span>
                <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FILTER1&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FILTER2&quot;</span><span class="p">)</span>
                <span class="c1"># This kind of filter prevents imaging to be classified as FLAT</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">((</span><span class="s2">&quot;Hartmann&quot;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)):</span>
                    <span class="k">return</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s2">&quot;GCALFLAT&quot;</span><span class="p">,</span> <span class="s2">&quot;FLAT&quot;</span><span class="p">,</span> <span class="s2">&quot;CAL&quot;</span><span class="p">])</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_twilight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBJECT&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TWILIGHT&quot;</span><span class="p">:</span>
            <span class="c1"># Twilight flats are of OBSTYPE == OBJECT, meaning that the generic</span>
            <span class="c1"># FLAT tag won&#39;t be triggered. Add it explicitly.</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;TWILIGHT&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;CAL&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SLITILLUM&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tag_is_spect</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;FLAT&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">)</span>

    <span class="nd">@astro_data_tag</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_image_or_spect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;GRATING&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;MIRROR&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s1">&#39;IMAGE&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TagSet</span><span class="p">([</span><span class="s1">&#39;SPECT&#39;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_is_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBSTYPE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;BIAS&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_is_bpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBSTYPE&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;BPM&quot;</span> <span class="ow">or</span> <span class="s2">&quot;BPMASK&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_tag_is_spect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pairs</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;MASKTYP&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;MASKNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;GRATING&#39;</span><span class="p">,</span> <span class="s1">&#39;MIRROR&#39;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">matches</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kw</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span> <span class="k">for</span> <span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">matches</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="n">factory</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="n">GMOSAstroDataTagged</span><span class="p">)</span>
</pre></div>
</div>
<p>These tags were taken from the <a class="reference external" href="https://dragons.readthedocs.io/">DRAGONS</a> GMOS package, and exemplify some
basic and more complex tag usage in <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>. For example, the <code class="docutils literal notranslate"><span class="pre">_tag_dark</span></code>
method will tag the data as <code class="docutils literal notranslate"><span class="pre">'DARK'</span></code> and <code class="docutils literal notranslate"><span class="pre">'CAL'</span></code> if the <code class="docutils literal notranslate"><span class="pre">OBSTYPE</span></code> is
<code class="docutils literal notranslate"><span class="pre">'DARK'</span></code>. The <code class="docutils literal notranslate"><span class="pre">blocks</span></code> argument is used to specify that the tags will
“block” other tags from being applied to the data, in this case the <code class="docutils literal notranslate"><span class="pre">'IMAGE'</span></code>
and <code class="docutils literal notranslate"><span class="pre">'SPECT'</span></code> tags.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tag group</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">add</span></code></p></td>
<td><p>Add the tag to the global set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">remove</span></code></p></td>
<td><p>Remove the tag from the global set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blocked_by</span></code></p></td>
<td><p>Tags that, if present, will prevent the TagSet
from being added.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">blocks</span></code></p></td>
<td><p><em>Other</em> <code class="docutils literal notranslate"><span class="pre">TagSet</span></code> s containing these tags will
not be added to the global set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">if_present</span></code></p></td>
<td><p>This <code class="docutils literal notranslate"><span class="pre">TagSet</span></code> will only be added if the
specified tags are present.</p></td>
</tr>
</tbody>
</table>
<p>Let’s make new <a class="reference internal" href="api/astrodata.AstroData.html#astrodata.AstroData" title="astrodata.AstroData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstroData</span></code></a> objects for our files and see what tags they have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">all_ad_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">location</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;quickstart_data/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">ad</span> <span class="o">=</span> <span class="n">astrodata</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opened </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2"> with class </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tags: </span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">tags</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">all_ad_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
</pre></div>
</div>
<p>The result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Opened N20170614S0201.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;IMAGE&#39;, &#39;GMOS&#39;}
Opened N20170614S0202.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;IMAGE&#39;, &#39;GMOS&#39;}
Opened N20170614S0203.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;IMAGE&#39;, &#39;GMOS&#39;}
Opened N20170614S0204.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;IMAGE&#39;, &#39;GMOS&#39;}
Opened N20170614S0205.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;IMAGE&#39;, &#39;GMOS&#39;}
Opened N20170613S0180.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170613S0181.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170613S0182.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170613S0183.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170613S0184.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170615S0534.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170615S0535.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170615S0536.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170615S0537.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170615S0538.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;BIAS&#39;, &#39;CAL&#39;, &#39;GMOS&#39;}
Opened N20170702S0178.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;FLAT&#39;, &#39;GMOS&#39;, &#39;TWILIGHT&#39;, &#39;IMAGE&#39;, &#39;CAL&#39;}
Opened N20170702S0179.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;FLAT&#39;, &#39;GMOS&#39;, &#39;TWILIGHT&#39;, &#39;IMAGE&#39;, &#39;CAL&#39;}
Opened N20170702S0180.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;FLAT&#39;, &#39;GMOS&#39;, &#39;TWILIGHT&#39;, &#39;IMAGE&#39;, &#39;CAL&#39;}
Opened N20170702S0181.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;FLAT&#39;, &#39;GMOS&#39;, &#39;TWILIGHT&#39;, &#39;IMAGE&#39;, &#39;CAL&#39;}
Opened N20170702S0182.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;FLAT&#39;, &#39;GMOS&#39;, &#39;TWILIGHT&#39;, &#39;IMAGE&#39;, &#39;CAL&#39;}
Opened bpm_20170306_gmos-n_Ham_22_full_12amp.fits with class &lt;class &#39;__main__.GMOSAstroDataTagged&#39;&gt;
Tags: {&#39;SPECT&#39;, &#39;GMOS&#39;}
</pre></div>
</div>
<p>Now, our data is automatically tagged with the appropriate tags when we open
the files, and we can use these tags to filter data when manipulating files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter out all the bias frames.</span>
<span class="k">for</span> <span class="n">ad</span> <span class="ow">in</span> <span class="n">all_ad_data</span><span class="p">:</span>
    <span class="k">if</span> <span class="s1">&#39;BIAS&#39;</span> <span class="ow">in</span> <span class="n">ad</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ad</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2"> is a bias frame.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>There are many more features available in <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, but this should give
you a good starting point for working with your own data.</p>
</section>
<section id="advanced-usage">
<h2>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Link to this heading"></a></h2>
<p>This is a very basic introduction to <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, and there are many more
features available. For examples of usage in practice, check out <a class="reference external" href="https://dragons.readthedocs.io/">DRAGONS</a>’s
<code class="xref py py-mod docutils literal notranslate"><span class="pre">DRAGONS:gemini_instruments</span></code> package.</p>
<p>If you plan on developing <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>, or you’d like to use the same
development environment <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a> uses, you can install <a class="reference internal" href="api_short.html#module-astrodata" title="astrodata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astrodata</span></code></a>
with development dependencies. See the <a class="reference internal" href="developer/index.html"><span class="doc">Developer Installation</span></a> guide for more
information.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="astrodata Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="manuals/index.html" class="btn btn-neutral float-right" title="Astrodata Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-present, NOIRLab/Gemini Observatories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>